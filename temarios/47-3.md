

##  Planificaci贸n Guiada por B煤squeda: Superando las Limitaciones de Memoria del LLM

La planificaci贸n tradicional asume un entorno y un conjunto de reglas de transici贸n de estado conocidos. En el mundo real, los agentes necesitan **informaci贸n externa (b煤squeda)** para definir el entorno, evaluar los riesgos y encontrar los pasos intermedios.

### 1. El Ciclo Integrado de B煤squeda y Planificaci贸n

La integraci贸n se modela como un ciclo iterativo donde el LLM alterna entre dos modos clave:

1.  **Modo de Planificaci贸n:** Define la estrategia general, descompone la tarea en sub-metas y determina qu茅 informaci贸n falta.
2.  **Modo de B煤squeda (*Search*/RAG):** Adquiere la informaci贸n faltante, valida suposiciones y rellena los vac铆os de conocimiento.



### 2. T茅cnicas de B煤squeda y Recuperaci贸n (RAG)

El agente de planificaci贸n utiliza un m贸dulo de B煤squeda/RAG (*Retrieval-Augmented Generation*) para acceder a informaci贸n externa.

* **Mecanismo:** Cuando el LLM identifica una brecha de conocimiento (ej. "驴Cu谩l es el c贸digo de tr谩fico local para esta intersecci贸n?"), genera una consulta de b煤squeda.
    * La consulta accede a una **Base de Conocimiento Externa** (铆ndice vectorial, web, bases de datos internas).
    * Los fragmentos de informaci贸n m谩s relevantes se devuelven y se insertan en el contexto (*prompt*) del LLM.
* **Funci贸n:** La informaci贸n externa recuperada se convierte en **evidencia f谩ctica** que el LLM utiliza como un nuevo axioma para continuar su razonamiento (planificaci贸n).

### 3. T茅cnicas de Planificaci贸n Secuencial Guiada por B煤squeda

El LLM utiliza el Razonamiento en Cadena (*Chain-of-Thought*) o estructuras m谩s complejas para integrar la informaci贸n recuperada en la secuencia de acciones.

#### A. Planificaci贸n con rbol de Pensamiento (*Tree-of-Thought*, ToT)
El ToT es ideal para la integraci贸n de b煤squeda porque permite al agente explorar m煤ltiples futuros posibles basados en la informaci贸n recuperada.

* **Mecanismo:** En cada paso de la planificaci贸n, el agente puede:
    1.  Generar una **opci贸n de acci贸n A** y hacer una b煤squeda para validar la viabilidad de A.
    2.  Generar una **opci贸n de acci贸n B** y hacer una b煤squeda para encontrar los requisitos de B.
    3.  **Evaluar** las opciones basadas en la evidencia f谩ctica y la probabilidad de 茅xito.
* **Ventaja:** Permite una **planificaci贸n contingente**, donde el plan cambia din谩micamente seg煤n la informaci贸n m谩s reciente.

#### B. Planificaci贸n Modular y Descomposici贸n de Tareas
Para objetivos a largo plazo, la integraci贸n se realiza de forma jer谩rquica.

1.  **Nivel Superior (LLM):** Define el objetivo macro (ej. "Organizar un viaje a Roma").
2.  **Planificaci贸n Intermedia:** Identifica los pasos clave (ej. "1. Buscar vuelos", "2. Reservar hotel", "3. Encontrar actividades").
3.  **B煤squeda Detallada:** Para cada paso intermedio, se invoca el m贸dulo RAG (ej. B煤squeda de la pol铆tica de cancelaci贸n del hotel X).
4.  **Refinamiento del Plan:** La informaci贸n detallada (ej. "el vuelo Y solo opera los martes") refina el plan de nivel superior.

#### C. Planificaci贸n Reforzada (RL asistido por RAG)
En entornos de Aprendizaje por Refuerzo (RL), la b煤squeda puede reemplazar la exploraci贸n ciega.

* **Mecanismo:** Si el agente se encuentra en un estado desconocido ($S$) y el modelo causal no puede predecir la transici贸n de estado, el agente puede:
    * Consultar una base de conocimiento (ej. un manual de operaciones) para encontrar la acci贸n 贸ptima en $S$.
    * Utilizar la informaci贸n recuperada como **recompensa o se帽al de valor** para actualizar su pol铆tica de RL.
* **Funci贸n:** La B煤squeda act煤a como una forma de **exploraci贸n *off-policy*** guiada por el conocimiento, acelerando la convergencia.

### 4. Requisitos para la Solidez del Sistema

1.  **Evaluaci贸n de la Fuente:** El LLM debe ser capaz de evaluar la **confiabilidad** y la **actualidad** de la informaci贸n recuperada. El *prompt* debe incluir instrucciones para que el LLM priorice las fuentes verificadas o la informaci贸n con *timestamp* reciente.
2.  **Control de la Latencia:** La b煤squeda es una operaci贸n lenta. El agente debe optimizar cu谩ndo y qu茅 buscar, favoreciendo la planificaci贸n interna cuando la informaci贸n no sea cr铆tica.
3.  **Lenguaje de Representaci贸n Unificado:** La informaci贸n recuperada debe estar en un formato que el LLM pueda consumir y utilizar f谩cilmente para la planificaci贸n (ej., hechos estructurados en JSON o listas claras).

### 5. Conclusi贸n

La **Integraci贸n de B煤squeda y Planificaci贸n** es fundamental para crear agentes de IA con autonom铆a real. Al utilizar la B煤squeda (RAG) para superar las limitaciones de conocimiento y al emplear estructuras de razonamiento avanzadas como el **rbol de Pensamiento** para integrar esa informaci贸n, el LLM puede alternar de manera inteligente entre la adquisici贸n de datos y la ejecuci贸n de acciones. Esto le permite formular y lograr objetivos complejos y a largo plazo en entornos din谩micos e inciertos.

---

Continua: [[48.1](https://github.com/webmastervetea/advanced-ai-curriculum/blob/main/temarios/48-1.md)] 
