
## ⚖️ Auditoría Sistemática de IA: Equidad, Sesgo y Documentación Formal

La auditoría de la IA es un proceso iterativo que va más allá de medir la precisión general. Su objetivo es garantizar que el rendimiento del modelo sea equitativo y predecible en todos los **subgrupos sensibles** (demográficos, socioeconómicos, geográficos) y que no perpetúe sesgos históricos.

### 1. El Proceso Sistemático de Auditoría de Sesgos (4 Etapas)

Una auditoría formal debe seguir un ciclo de vida definido para la ética y la equidad:

#### Etapa 1: Definición y Planificación (Goals)

1.  **Definir Grupos Protegidos:** Identificar los atributos sensibles que serán analizados (ej., género, edad, raza, etnia).
2.  **Definir Métricas de Equidad:** Dado el objetivo del modelo, seleccionar la métrica de equidad adecuada (Paridad Estadística, Igualdad de Oportunidades, etc.). *Es crucial entender que no se pueden satisfacer todas simultáneamente.*
3.  **Establecer Línea Base de Rendimiento:** Definir qué métricas de rendimiento (precisión, *recall*, F1) se auditarán y el umbral mínimo aceptable para el grupo minoritario.

#### Etapa 2: Medición y Detección (Measurement)

1.  **Segregación de Datos:** Dividir los conjuntos de entrenamiento, validación y prueba según los grupos protegidos.
2.  **Cálculo de Métricas de Subgrupo:** Evaluar tanto las métricas de equidad como las de rendimiento en cada subgrupo.
3.  **Identificación de *Gaps*:** Detectar dónde el rendimiento del modelo cae por debajo del umbral base o donde la métrica de equidad está significativamente desequilibrada (ej., el *recall* para el grupo A es del 90%, pero para el grupo B es del 65%).

#### Etapa 3: Análisis y Diagnóstico (Analysis)

1.  **Diagnóstico del Sesgo de Datos:**
    * ¿El conjunto de entrenamiento está subrepresentado para el grupo B? (**Sesgo de Muestreo**).
    * ¿El *ground truth* refleja un sesgo histórico (ej., decisiones pasadas de préstamo que ya eran injustas)? (**Sesgo Histórico**).
2.  **Diagnóstico del Sesgo del Modelo:**
    * Usar XAI (SHAP, LIME) para el grupo subrepresentado para ver si el modelo está usando *proxies* (variables sustitutas) sensibles (ej., usar el código postal como proxy de la raza).
    * Determinar si el modelo está sobreajustado o subajustado para los datos del subgrupo.

#### Etapa 4: Mitigación y Documentación (Mitigation & Documentation)

1.  **Mitigación:** Aplicar técnicas de mitigación (ej., reponderación de datos, adversarios de equidad, post-procesamiento del umbral).
2.  **Re-entrenamiento y Re-auditoría:** Repetir las etapas 2 y 3.
3.  **Documentación Formal:** Generar las **Model Cards** y los **Data Sheets** que resuman el proceso de auditoría y los resultados (ver sección 3).

---

### 2. Métricas de Equidad Clave para Subgrupos

La elección de la métrica depende del **costo del error** para la aplicación. No se puede lograr la equidad en todas las métricas simultáneamente.

| Métrica de Equidad | Definición (Fórmula) | Costo del Error Mitigado |
| :--- | :--- | :--- |
| **1. Paridad Estadística** (Demographic Parity) | $P(\hat{Y}=1 | A=a) = P(\hat{Y}=1 | A=b)$ | Asegura que la **tasa de selección** (aceptación, predicción positiva) es igual entre los grupos $a$ y $b$. |
| **2. Igualdad de Oportunidades** (Equal Opportunity) | $P(\hat{Y}=1 | Y=1, A=a) = P(\hat{Y}=1 | Y=1, A=b)$ | Asegura que el *recall* (Tasa de Verdaderos Positivos) es igual. Fundamental cuando el resultado **positivo es beneficioso** (ej., acceso a un préstamo, admisión). |
| **3. Paridad Predictiva** (Predictive Parity) | $P(Y=1 | \hat{Y}=1, A=a) = P(Y=1 | \hat{Y}=1, A=b)$ | Asegura que la **Precisión** (Valor Predictivo Positivo) es igual. Fundamental cuando el **falso positivo es costoso** (ej., alarmas de fraude, diagnóstico de enfermedad). |

**Rendimiento en Subgrupos:** Se mide la precisión (*Accuracy*), el *Recall* y el *Precision* para cada grupo. Un *gap* significativo en cualquiera de estas métricas indica que el modelo no se generaliza bien a los datos del subgrupo, lo que puede requerir más datos de entrenamiento específicos.

---

### 3. Desarrollo de Documentación Formal (*Model Cards*)

Las **Model Cards** (Tarjetas de Modelo) son un estándar de documentación propuesto por Google y otros líderes de la industria para aumentar la transparencia. Funcionan como una "etiqueta nutricional" para el modelo, proporcionando un resumen conciso de su rendimiento en condiciones de prueba rigurosas.

La documentación debe ser desarrollada por el equipo de auditoría y debe acompañar al modelo en su despliegue.

| Sección Clave de la Model Card | Propósito de la Documentación |
| :--- | :--- |
| **1. Detalles del Modelo** | Versión, fecha de lanzamiento, desarrolladores, tipo de arquitectura (ej. Transformer, GNN). |
| **2. Uso Previsto** | **Intención:** Para qué se diseñó el modelo (ej., aprobar préstamos de consumo). **Usuarios:** Quién usará la salida (ej., oficiales de crédito, no el público general). |
| **3. Datos de Entrenamiento** | **Fuentes:** Dónde se obtuvieron los datos. **Composición:** Distribución por grupos demográficos. **Métodos de Filtrado:** Qué datos se excluyeron o aumentaron. *Crucial para detectar el sesgo de datos.* |
| **4. Métricas y Equidad** | **Métricas Globales:** Rendimiento general del modelo (F1, AUC, etc.). **Métricas por Subgrupo:** Rendimiento explícito (Accuracy, Recall) para cada grupo auditado (ej., "Mujeres de 40-50 años"). **Resultados de Equidad:** Valores de Paridad Estadística y/o Igualdad de Oportunidades. |
| **5. Limitaciones y Advertencias** | **Condiciones de Uso:** Para qué tareas *no* está diseñado el modelo (ej., "No debe usarse para préstamos hipotecarios"). **Rendimiento Bajo:** Identificación de subgrupos donde el modelo mostró un rendimiento inaceptable (el **Gap de Rendimiento**). |

La creación de Model Cards y Data Sheets (documentación detallada sobre el *dataset*) transforma la auditoría de un ejercicio interno a una **promesa de transparencia** ante los reguladores, usuarios y el público.

---

Continua: [[29.1.1](https://github.com/webmastervetea/advanced-ai-curriculum/blob/main/temarios/29-1-1.md)] 
